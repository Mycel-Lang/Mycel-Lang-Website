# Error E4003: Failed to write to cache directory

## Summary

This error occurs when the Mycel compiler is unable to write files to the project's cache directory, usually due to a filesystem permissions issue.

---

## The Problem

To improve performance, the Mycel toolchain caches the results of expensive operations, such as downloading remote content or the output of pure functions. This cache is stored in a directory within your project (e.g., `.mycel-cache`). If the compiler does not have permission to create or write to this directory, caching will fail.

**Scenario:**

1.  The `.mycel-cache` directory exists but has been set to read-only.
2.  You are running the compiler as a user who does not have write permissions for the project folder.
3.  The compiler tries to save a cached result and the operating system denies the write request.

```sh
# You might see an OS-level error like this alongside the Mycel error
Permission denied (os error 13)
```

## The Solution

Ensure that you have the correct write permissions for the project directory. You can check and modify filesystem permissions using standard operating system commands.

```sh
# On Linux or macOS, you can check permissions with `ls -ld`
ls -ld .mycel-cache

# You can fix permissions with `chmod`
chmod -R u+w .mycel-cache
```

You can also try deleting the cache directory (`rm -rf .mycel-cache`) and letting the compiler recreate it on the next run.

---

## Detailed Explanation

The caching system is a key performance feature of the Mycel toolchain. On the first build, the compiler performs all the necessary work and stores the results in the cache. On subsequent builds, it can retrieve these results from the cache instead of re-computing them, leading to significantly faster build times.

This process requires the ability to write to the filesystem. If this ability is blocked, the compiler can't save the results. While the compiler could potentially continue without caching, this would lead to inconsistent and confusing performance behavior. Instead, it treats the inability to write to the cache as a fatal error, `E4003`, to alert you to the underlying configuration problem.

This error is almost always caused by an issue outside of Mycel itself, related to the operating system's file permissions. When debugging, you should investigate:

1.  **Ownership:** Does your user account own the project files?
2.  **Permissions:** Does the owner have write permissions for the project directory and the cache directory?
3.  **Filesystem Status:** Is the disk full or mounted as read-only?

Resolving the underlying filesystem permission issue will allow the compiler to write to the cache and proceed.
