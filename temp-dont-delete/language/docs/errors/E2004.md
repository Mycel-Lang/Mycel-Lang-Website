# Error E2004: Failed to parse included data

## Summary

This error occurs when a file included via `@include` is successfully downloaded or read, but its content is not valid for the expected format (e.g., malformed JSON, invalid CSV).

---

## The Problem

Certain functions or directives may expect included files to have a specific structure, such as being valid JSON or CSV. If the content of the file does not conform to the rules of that format, the parser for that format will fail.

```mycel
// The included file is not valid JSON (e.g., missing a comma).
@processJson("./data.json")
```

**File: `data.json`**
```json
{
  "name": "John Doe"
  "age": 30
}
```

In the `data.json` file above, there is a missing comma between the `name` and `age` properties, making it invalid JSON.

## The Solution

Validate and correct the syntax of the included data file. Ensure that it strictly conforms to the specification of its format (e.g., JSON, CSV).

```mycel
// No change to the Mycel file.
@processJson("./data.json")
```

**File: `data.json` (Fixed)**
```json
{
  "name": "John Doe",
  "age": 30
}
```

---

## Detailed Explanation

This error is different from `E2000` (File not found) or `E2003` (Network error). In this case, the file was successfully located and read. However, the *content* of the file is malformed.

When you use a function like `@processJson`, the compiler reads the file's content and then hands it off to a specialized JSON parser. That parser has its own strict set of rules. It expects a specific structure of braces `{}`, brackets `[]`, quotes `""`, and commas `,`. If it encounters a syntax error (like a missing comma or a trailing comma), it will fail and report the issue to the Mycel compiler.

The Mycel compiler then relays this failure to you as error `E2004`. The error message will often include a more specific message from the underlying parser (e.g., "JSON parsing error at line 3, column 3: Expected a comma").

To fix this, you should use an external tool or a text editor with linting capabilities to validate the data file and correct the syntax errors.
